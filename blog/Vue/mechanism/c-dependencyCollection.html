<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç† | XXY BLOG</title>
    <meta name="description" content="xinxingyu blog">
    <link rel="icon" href="/blog/icon.jpg">
    
    <link rel="preload" href="/blog/assets/css/0.styles.ac67d5b0.css" as="style"><link rel="preload" href="/blog/assets/js/app.43137687.js" as="script"><link rel="preload" href="/blog/assets/js/32.eed45cce.js" as="script"><link rel="prefetch" href="/blog/assets/js/12.2646a010.js"><link rel="prefetch" href="/blog/assets/js/2.3c94af2b.js"><link rel="prefetch" href="/blog/assets/js/3.a93a7d26.js"><link rel="prefetch" href="/blog/assets/js/4.26149ccc.js"><link rel="prefetch" href="/blog/assets/js/5.0cb2cb0b.js"><link rel="prefetch" href="/blog/assets/js/6.9c905d89.js"><link rel="prefetch" href="/blog/assets/js/7.b1c5df08.js"><link rel="prefetch" href="/blog/assets/js/8.39ffc52a.js"><link rel="prefetch" href="/blog/assets/js/9.b320c79c.js"><link rel="prefetch" href="/blog/assets/js/10.a593df3c.js"><link rel="prefetch" href="/blog/assets/js/11.db81d8a1.js"><link rel="prefetch" href="/blog/assets/js/13.f0837add.js"><link rel="prefetch" href="/blog/assets/js/14.9c879b0c.js"><link rel="prefetch" href="/blog/assets/js/15.40f2cb25.js"><link rel="prefetch" href="/blog/assets/js/16.cb9a5deb.js"><link rel="prefetch" href="/blog/assets/js/17.19c4bc66.js"><link rel="prefetch" href="/blog/assets/js/18.2a72da66.js"><link rel="prefetch" href="/blog/assets/js/19.845877f0.js"><link rel="prefetch" href="/blog/assets/js/20.6dea87c8.js"><link rel="prefetch" href="/blog/assets/js/21.b52f25d9.js"><link rel="prefetch" href="/blog/assets/js/22.0484fad9.js"><link rel="prefetch" href="/blog/assets/js/23.e53f936f.js"><link rel="prefetch" href="/blog/assets/js/24.a464e9e3.js"><link rel="prefetch" href="/blog/assets/js/25.2ebfa9b7.js"><link rel="prefetch" href="/blog/assets/js/26.934b8b2d.js"><link rel="prefetch" href="/blog/assets/js/27.f3277676.js"><link rel="prefetch" href="/blog/assets/js/28.2fac4715.js"><link rel="prefetch" href="/blog/assets/js/29.738cc229.js"><link rel="prefetch" href="/blog/assets/js/30.7885ef62.js"><link rel="prefetch" href="/blog/assets/js/31.066680a1.js"><link rel="prefetch" href="/blog/assets/js/33.2b585fa8.js"><link rel="prefetch" href="/blog/assets/js/34.ec23679e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.ac67d5b0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container base"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">XXY BLOG</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">blog</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/blog/Vue/" class="nav-link router-link-active">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/CompilersPrinciples/" class="nav-link">CompilersPrinciples</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/Frame/" class="nav-link">Frame</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/JavaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/Css/" class="nav-link">Css</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/Node/" class="nav-link">Node</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">About</a></div> <a href="https://github.com/xinxingyu" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">blog</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/blog/Vue/" class="nav-link router-link-active">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/CompilersPrinciples/" class="nav-link">CompilersPrinciples</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/Frame/" class="nav-link">Frame</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/JavaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/Css/" class="nav-link">Css</a></li><li class="dropdown-item"><!----> <a href="/blog/blog/Node/" class="nav-link">Node</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">About</a></div> <a href="https://github.com/xinxingyu" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/blog/blog/Vue/dataBinding.html" class="sidebar-link">åŒå‘æ•°æ®ç»‘å®š</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>mechanism</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/blog/blog/Vue/mechanism/a-overview.html" class="sidebar-link">Vue.js è¿è¡Œæœºåˆ¶å…¨å±€æ¦‚è§ˆ</a></li><li><a href="/blog/blog/Vue/mechanism/b-responsive.html" class="sidebar-link">å“åº”å¼ç³»ç»Ÿçš„åŸºæœ¬åŸç†</a></li><li><a href="/blog/blog/Vue/mechanism/c-dependencyCollection.html" class="active sidebar-link">å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/blog/Vue/mechanism/c-dependencyCollection.html#ä¸ºä»€ä¹ˆè¦ä¾èµ–æ”¶é›†ï¼Ÿ" class="sidebar-link">ä¸ºä»€ä¹ˆè¦ä¾èµ–æ”¶é›†ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/blog/Vue/mechanism/c-dependencyCollection.html#è®¢é˜…è€…-dep" class="sidebar-link">è®¢é˜…è€… Dep</a></li><li class="sidebar-sub-header"><a href="/blog/blog/Vue/mechanism/c-dependencyCollection.html#è§‚å¯Ÿè€…-watcher" class="sidebar-link">è§‚å¯Ÿè€… Watcher</a></li><li class="sidebar-sub-header"><a href="/blog/blog/Vue/mechanism/c-dependencyCollection.html#ä¾èµ–æ”¶é›†" class="sidebar-link">ä¾èµ–æ”¶é›†</a></li><li class="sidebar-sub-header"><a href="/blog/blog/Vue/mechanism/c-dependencyCollection.html#å°ç»“" class="sidebar-link">å°ç»“</a></li></ul></li><li><a href="/blog/blog/Vue/mechanism/d-virtualDOM.html" class="sidebar-link">å®ç° Virtual DOM ä¸‹çš„ä¸€ä¸ª VNode èŠ‚ç‚¹</a></li><li><a href="/blog/blog/Vue/mechanism/e-templateCompile.html" class="sidebar-link">template æ¨¡æ¿æ˜¯æ€æ ·é€šè¿‡ Compile ç¼–è¯‘çš„</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†"><a href="#å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†" aria-hidden="true" class="header-anchor">#</a> å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†</h1> <h2 id="ä¸ºä»€ä¹ˆè¦ä¾èµ–æ”¶é›†ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä¾èµ–æ”¶é›†ï¼Ÿ" aria-hidden="true" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦ä¾èµ–æ”¶é›†ï¼Ÿ</h2> <p>å…ˆä¸¾ä¸ªæ —å­ğŸŒ°
æˆ‘ä»¬ç°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ª Vue å¯¹è±¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    template<span class="token punctuation">:</span>
        <span class="token template-string"><span class="token string">`&lt;div&gt;
            &lt;span&gt;{{text1}}&lt;/span&gt;
            &lt;span&gt;{{text2}}&lt;/span&gt;
        &lt;div&gt;`</span></span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        text1<span class="token punctuation">:</span> <span class="token string">'text1'</span><span class="token punctuation">,</span>
        text2<span class="token punctuation">:</span> <span class="token string">'text2'</span><span class="token punctuation">,</span>
        text3<span class="token punctuation">:</span> <span class="token string">'text3'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ç„¶åæˆ‘ä»¬åšäº†è¿™ä¹ˆä¸€ä¸ªæ“ä½œã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>text3 <span class="token operator">=</span> <span class="token string">'modify text3'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>8
æˆ‘ä»¬ä¿®æ”¹äº† <code>data</code> ä¸­ <code>text3</code> çš„æ•°æ®ï¼Œä½†æ˜¯å› ä¸ºè§†å›¾ä¸­å¹¶ä¸éœ€è¦ç”¨åˆ° <code>text3</code> ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€è¦è§¦å‘ä¸Šä¸€ç« æ‰€è®²çš„ <code>cb</code> å‡½æ•°æ¥æ›´æ–°è§†å›¾ï¼Œè°ƒç”¨ <code>cb</code> æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚</p> <p>å†æ¥ä¸€ä¸ªæ —å­ğŸŒ°</p> <p>å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªå…¨å±€çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨å¤šä¸ª Vue å¯¹è±¡ä¸­ç”¨åˆ°å®ƒè¿›è¡Œå±•ç¤ºã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> globalObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    text1<span class="token punctuation">:</span> <span class="token string">'text1'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    template<span class="token punctuation">:</span>
        <span class="token template-string"><span class="token string">`&lt;div&gt;
            &lt;span&gt;{{text1}}&lt;/span&gt;
        &lt;div&gt;`</span></span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> globalObj
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    template<span class="token punctuation">:</span>
        <span class="token template-string"><span class="token string">`&lt;div&gt;
            &lt;span&gt;{{text1}}&lt;/span&gt;
        &lt;div&gt;`</span></span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> globalObj
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ‰§è¡Œäº†å¦‚ä¸‹æ“ä½œã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>globalObj<span class="token punctuation">.</span>text1 <span class="token operator">=</span> <span class="token string">'hello,text1'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æˆ‘ä»¬åº”è¯¥éœ€è¦é€šçŸ¥ <code>o1</code> ä»¥åŠ <code>o2</code> ä¸¤ä¸ªvmå®ä¾‹è¿›è¡Œè§†å›¾çš„æ›´æ–°ï¼Œ <strong>ã€Œä¾èµ–æ”¶é›†ã€</strong> ä¼šè®© <code>text1</code> è¿™ä¸ªæ•°æ®çŸ¥é“â€œå“¦ï½æœ‰ä¸¤ä¸ªåœ°æ–¹ä¾èµ–æˆ‘çš„æ•°æ®ï¼Œæˆ‘å˜åŒ–çš„æ—¶å€™éœ€è¦é€šçŸ¥å®ƒä»¬ï½â€ã€‚</p> <p>æœ€ç»ˆä¼šå½¢æˆæ•°æ®ä¸è§†å›¾çš„ä¸€ç§å¯¹åº”å…³ç³»ï¼Œå¦‚ä¸‹å›¾ã€‚
<img src="data:image/jpeg;base64,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" alt></p> <h2 id="è®¢é˜…è€…-dep"><a href="#è®¢é˜…è€…-dep" aria-hidden="true" class="header-anchor">#</a> è®¢é˜…è€… Dep</h2> <p>é¦–å…ˆæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªè®¢é˜…è€… Dep ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥å­˜æ”¾ <code>Watcher</code> è§‚å¯Ÿè€…å¯¹è±¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* ç”¨æ¥å­˜æ”¾Watcherå¯¹è±¡çš„æ•°ç»„ */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* åœ¨subsä¸­æ·»åŠ ä¸€ä¸ªWatcherå¯¹è±¡ */</span>
    <span class="token function">addSub</span> <span class="token punctuation">(</span>sub<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* é€šçŸ¥æ‰€æœ‰Watcherå¯¹è±¡æ›´æ–°è§†å›¾ */</span>
    <span class="token function">notify</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            sub<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ä¸ºäº†ä¾¿äºç†è§£æˆ‘ä»¬åªå®ç°äº†æ·»åŠ çš„éƒ¨åˆ†ä»£ç ï¼Œä¸»è¦æ˜¯ä¸¤ä»¶äº‹æƒ…ï¼š</p> <ol><li>ç”¨ <code>addSub</code> æ–¹æ³•å¯ä»¥åœ¨ç›®å‰çš„ <code>Dep</code> å¯¹è±¡ä¸­å¢åŠ ä¸€ä¸ª <code>Watcher</code> çš„è®¢é˜…æ“ä½œï¼›</li> <li>ç”¨ <code>notify</code> æ–¹æ³•é€šçŸ¥ç›®å‰ <code>Dep</code> å¯¹è±¡çš„ <code>subs</code> ä¸­çš„æ‰€æœ‰ <code>Watcher</code> å¯¹è±¡è§¦å‘æ›´æ–°æ“ä½œã€‚</li></ol> <h2 id="è§‚å¯Ÿè€…-watcher"><a href="#è§‚å¯Ÿè€…-watcher" aria-hidden="true" class="header-anchor">#</a> è§‚å¯Ÿè€… Watcher</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* åœ¨newä¸€ä¸ªWatcherå¯¹è±¡æ—¶å°†è¯¥å¯¹è±¡èµ‹å€¼ç»™Dep.targetï¼Œåœ¨getä¸­ä¼šç”¨åˆ° */</span>
        Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* æ›´æ–°è§†å›¾çš„æ–¹æ³• */</span>
    <span class="token function">update</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è§†å›¾æ›´æ–°å•¦ï½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="ä¾èµ–æ”¶é›†"><a href="#ä¾èµ–æ”¶é›†" aria-hidden="true" class="header-anchor">#</a> ä¾èµ–æ”¶é›†</h2> <p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ <code>defineReactive</code> ä»¥åŠ Vue çš„æ„é€ å‡½æ•°ï¼Œæ¥å®Œæˆä¾èµ–æ”¶é›†ã€‚</p> <p>æˆ‘ä»¬åœ¨é—­åŒ…ä¸­å¢åŠ äº†ä¸€ä¸ª <code>Dep</code> ç±»çš„å¯¹è±¡ï¼Œç”¨æ¥æ”¶é›† <code>Watcher</code> å¯¹è±¡ã€‚åœ¨å¯¹è±¡è¢«ã€Œè¯»ã€çš„æ—¶å€™ï¼Œä¼šè§¦å‘ <code>reactiveGetter</code> å‡½æ•°æŠŠå½“å‰çš„ <code>Watcher</code> å¯¹è±¡ï¼ˆå­˜æ”¾åœ¨ Dep.target ä¸­ï¼‰æ”¶é›†åˆ° <code>Dep</code> ç±»ä¸­å»ã€‚ä¹‹åå¦‚æœå½“è¯¥å¯¹è±¡è¢«ã€Œå†™ã€çš„æ—¶å€™ï¼Œåˆ™ä¼šè§¦å‘ <code>reactiveSetter</code> æ–¹æ³•ï¼Œé€šçŸ¥ <code>Dep</code> ç±»è°ƒç”¨ <code>notify</code> æ¥è§¦å‘æ‰€æœ‰ <code>Watcher</code> å¯¹è±¡çš„ <code>update</code> æ–¹æ³•æ›´æ–°å¯¹åº”è§†å›¾ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">defineReactive</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ä¸€ä¸ªDepç±»å¯¹è±¡ */</span>
    <span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        configurable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">reactiveGetter</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">/* å°†Dep.targetï¼ˆå³å½“å‰çš„Watcherå¯¹è±¡å­˜å…¥depçš„subsä¸­ï¼‰ */</span>
            dep<span class="token punctuation">.</span><span class="token function">addSub</span><span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> val<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">reactiveSetter</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>newVal <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token comment">/* åœ¨setçš„æ—¶å€™è§¦å‘depçš„notifyæ¥é€šçŸ¥æ‰€æœ‰çš„Watcherå¯¹è±¡æ›´æ–°è§†å›¾ */</span>
            dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_data <span class="token operator">=</span> options<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token function">observer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* æ–°å»ºä¸€ä¸ªWatcherè§‚å¯Ÿè€…å¯¹è±¡ï¼Œè¿™æ—¶å€™Dep.targetä¼šæŒ‡å‘è¿™ä¸ªWatcherå¯¹è±¡ */</span>
        <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* åœ¨è¿™é‡Œæ¨¡æ‹Ÿrenderçš„è¿‡ç¨‹ï¼Œä¸ºäº†è§¦å‘testå±æ€§çš„getå‡½æ•° */</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render~'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_data<span class="token punctuation">.</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="å°ç»“"><a href="#å°ç»“" aria-hidden="true" class="header-anchor">#</a> å°ç»“</h2> <p>æ€»ç»“ä¸€ä¸‹ã€‚</p> <p>é¦–å…ˆåœ¨ <code>observer</code> çš„è¿‡ç¨‹ä¸­ä¼šæ³¨å†Œ get æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ¥è¿›è¡Œ <strong>ã€Œä¾èµ–æ”¶é›†ã€</strong> ã€‚åœ¨å®ƒçš„é—­åŒ…ä¸­ä¼šæœ‰ä¸€ä¸ª Dep å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç”¨æ¥å­˜æ”¾ Watcher å¯¹è±¡çš„å®ä¾‹ã€‚å…¶å®ã€Œä¾èµ–æ”¶é›†ã€çš„è¿‡ç¨‹å°±æ˜¯æŠŠ Watcher å®ä¾‹å­˜æ”¾åˆ°å¯¹åº”çš„ Dep å¯¹è±¡ä¸­å»ã€‚<code>get</code> æ–¹æ³•å¯ä»¥è®©å½“å‰çš„ <code>Watcher</code> å¯¹è±¡ï¼ˆDep.targetï¼‰å­˜æ”¾åˆ°å®ƒçš„ subs ä¸­ï¼ˆaddSubï¼‰æ–¹æ³•ï¼Œåœ¨æ•°æ®å˜åŒ–æ—¶ï¼Œ<code>set</code> ä¼šè°ƒç”¨ <code>Dep</code> å¯¹è±¡çš„ <code>notify</code> æ–¹æ³•é€šçŸ¥å®ƒå†…éƒ¨æ‰€æœ‰çš„ Watcher å¯¹è±¡è¿›è¡Œè§†å›¾æ›´æ–°ã€‚</p> <p>è¿™æ˜¯ <code>Object.defineProperty</code> çš„ <code>set/get</code> æ–¹æ³•å¤„ç†çš„äº‹æƒ…ï¼Œé‚£ä¹ˆã€Œä¾èµ–æ”¶é›†ã€çš„å‰ææ¡ä»¶è¿˜æœ‰ä¸¤ä¸ªï¼š</p> <p>è§¦å‘ get æ–¹æ³•ï¼›
æ–°å»ºä¸€ä¸ª <code>Watcher</code> å¯¹è±¡ã€‚
è¿™ä¸ªæˆ‘ä»¬åœ¨ Vue çš„æ„é€ ç±»ä¸­å¤„ç†ã€‚æ–°å»ºä¸€ä¸ª Watcher å¯¹è±¡åªéœ€è¦ new å‡ºæ¥ï¼Œè¿™æ—¶å€™ <code>Dep.target</code> å·²ç»æŒ‡å‘äº†è¿™ä¸ª new å‡ºæ¥çš„ Watcher å¯¹è±¡æ¥ã€‚è€Œè§¦å‘ get æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå®é™…ä¸Šåªè¦æŠŠ render function è¿›è¡Œæ¸²æŸ“ï¼Œé‚£ä¹ˆå…¶ä¸­çš„ä¾èµ–çš„å¯¹è±¡éƒ½ä¼šè¢«ã€Œè¯»å–ã€ï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡æ‰“å°æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œè¯»å– test æ¥è§¦å‘ get è¿›è¡Œã€Œä¾èµ–æ”¶é›†ã€ã€‚</p> <p>æœ¬ç« æˆ‘ä»¬ä»‹ç»äº†ã€Œä¾èµ–æ”¶é›†ã€çš„è¿‡ç¨‹ï¼Œé…åˆä¹‹å‰çš„å“åº”å¼åŸç†ï¼Œå·²ç»æŠŠæ•´ä¸ªã€Œå“åº”å¼ç³»ç»Ÿã€ä»‹ç»å®Œæ¯•äº†ã€‚å…¶ä¸»è¦å°±æ˜¯ get è¿›è¡Œã€Œä¾èµ–æ”¶é›†ã€ã€‚set é€šè¿‡è§‚å¯Ÿè€…æ¥æ›´æ–°è§†å›¾ï¼Œé…åˆä¸‹å›¾ä»”ç»†æ‹ä¸€æ‹ï¼Œç›¸ä¿¡ä¸€å®šèƒ½ææ‡‚å®ƒï¼</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/blog/blog/Vue/mechanism/b-responsive.html" class="prev">
          å“åº”å¼ç³»ç»Ÿçš„åŸºæœ¬åŸç†
        </a></span> <span class="next"><a href="/blog/blog/Vue/mechanism/d-virtualDOM.html">
          å®ç° Virtual DOM ä¸‹çš„ä¸€ä¸ª VNode èŠ‚ç‚¹
        </a>
        â†’
      </span></p></div> </div> <!----></div></div>
    <script src="/blog/assets/js/32.eed45cce.js" defer></script><script src="/blog/assets/js/app.43137687.js" defer></script>
  </body>
</html>
